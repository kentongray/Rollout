<ion-header>
    <ion-navbar color="primary">
        <ion-searchbar *ngIf="searching" autofocus (keyup)="searchAddress($event.target.value)"
                       placeholder="{{'Enter_Your_Address' | translate}}" (cancel)="searching = false"></ion-searchbar>
        <ion-title *ngIf="!searching">
            <img src="assets/img/rollout_logo.png" style="margin-top:5px;" height="30" width="143">
        </ion-title>
        <ion-buttons end *ngIf="!searching">
            <button ion-button side="secondary" (click)="showFilterBar()">
                <ion-icon white name="pin"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>
<ion-content class="home">
    <div *ngIf="searching" class="address-search-results">
        <ion-list>
            <ion-item (click)="lookupCurrentLocation()">
                <ion-icon black name="pin"></ion-icon>
                {{'Use_Current_Location' | translate}}
            </ion-item>
            <div *ngIf="addresses">
                <ion-item *ngIf="!addresses.length">
                    {{'Address_Not_Found' | translate}} :(
                </ion-item>
                <ion-item *ngFor="let address of addresses" (click)="selectAddress(address)">
                    {{address.text}}
                </ion-item>
            </div>
        </ion-list>
    </div>
    <div class="error-message" *ngIf="errorMessage">

        {{errorMessage}}
        <br>
        <br>
        <a white (click)="retry()">{{'Try_Again' | translate}}
            <ion-icon name="refresh"></ion-icon>
        </a>
        <br>
        <br>
        <a href="mailto:info@rollouthouston.com">{{'Need_Help' | translate}}</a>
        <br>
    </div>
    <div class="no-schedule" *ngIf="!loading && events.length == 0 && !errorMessage">
        <h1>{{'No_Schedule_Found' | translate}}</h1>
        {{'Rollout_Is_Only_Available_For_The_City_Of_Houston' | translate}}
        <br>
        {{'Try_Again_When_You_Are_In_The_City_Or_In_An_Area_With_Trash_Pickup' | translate}}
        <br>
        <br>
        {{'Think_This_Is_A_Mistake' | translate}} <a href="mailto:info@rollouthouston.com">{{'Let_Us_Know' | translate}}</a>
        <br>
        <br>
        <!-- because we care -->
        <a white (click)="showFilterBar()">
            {{'Click_The' | translate}}
            <ion-icon name="pin"></ion-icon>
            {{'To_Change_Your_Location' | translate}}
        </a>
        <br>
        <br>
        <a white (click)="retry()">{{'Or_Try_Again' | translate}}
            <ion-icon name="refresh"></ion-icon>
        </a>
    </div>
    <div class="schedule" *ngIf="!errorMessage">
        <div *ngFor="let event of events" class="upcoming-event">
            <h2>{{event.day | relativeDate}}</h2>
            <div *ngIf="event.possibleHoliday" class="possible-holiday">
                <i class="ion-android-warning"></i>
                {{'Hey_This_Might_Be_A_Holiday' | translate}} <br>
                {{'Check_The' | translate}} <a (click)="openHolidaySchedule()" href="#">{{'Holiday_Schedule' | translate}}</a> {{'To_Make_Sure' | translate}}
            </div>
            <ul class="waste-types">
                <li *ngFor="let category of event.categories" class="waste-type">
                    <div (click)="goToDetails(category)" tappable>
                        <div *ngIf="category == 'waste'">
                            <ion-icon name="trash"></ion-icon>
                            <label>{{'Trash_And_Lawn' | translate}}</label>
                            <div class="when">{{'Every' | translate}} {{pickupDays.wasteDay | dayOfWeek}}</div>
                        </div>
                        <div *ngIf="category == 'recycling'">
                            <i class="fa fa-recycle"></i>
                            <label>{{'Recycling' | translate}}</label>
                            <div class="when">{{'Every_Other' | translate}} {{pickupDays.recyclingDay | dayOfWeek}}</div>
                        </div>
                        <div *ngIf="category == 'junk'">
                            <img class="icon icons8-Weight"
                                 src="assets/img/Weight-100.png"
                                 width="75" height="75">
                            <label>{{'Junk' | translate}}</label>
                            <div class="when">{{moment().date(pickupDays.junkWeekOfMonth).format("Do")}}
                                {{pickupDays.junkDay | dayOfWeek}} ({{'Even_Months' | translate}})
                            </div>
                        </div>

                        <div *ngIf="category == 'tree'">
                            <i class="fa fa-tree"></i>
                            <label>{{'Tree_Waste' | translate}}</label>
                            <div class="when">{{moment().date(pickupDays.junkWeekOfMonth).format("Do")}}
                                {{pickupDays.junkDay | dayOfWeek}} ({{'Odd_Months' | translate}})
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- spacer for the button :( -->
    <div style="height:60px"></div>
    <div ion-fixed class="bottom-actions" *ngIf="!(loading || errorMessage || events.length == 0)">
        <button ion-button (click)="goToRemindMe()">
            <ion-icon name="notifications"></ion-icon> &nbsp;
            {{ 'Remind_Me' | translate }}
        </button>
    </div>
</ion-content>
